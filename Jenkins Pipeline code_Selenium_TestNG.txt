pipeline
{
Agent any 
    {
     stages
        {    
          tools
           {  mvn MAVEN_HOME
                   jdk JAVA_HOME
                }

       }
       stage('Checkout')
        {
           steps 
             {git branch :name , url : https://www.natwest.com/repo.git }

        }
       
        stage('Build')
         {

         steps{ sh mvn clean install }

         }

         stage('Test')
        {
           steps
           {
            sh mvn test -DxmltestSuitexmlfile = testing.xml
           } 
         }
         stage ('SonarCode Quality')
            {
                steps
            { sh mvn sonar:sonar}
          
         stage ('Publish HTML Report')
           {
                 
           steps { junit target/surefire-htmlreport/*.xml
              publishHtml (

                      includeall : True ,
                      allow missing: False
                      Reportdir: target/surefire-htmlreport
                      ReportFile : index.html 
                      ReportName : random(test Report )}
            }
           }
         }
            
